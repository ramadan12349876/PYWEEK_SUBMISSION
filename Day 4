from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.chrome.service import Service
from webdriver_manager.chrome import ChromeDriverManager
import pandas as pd
import time

url=("https://webscraper.io/")
driver = webdriver.Chrome(service=Service(ChromeDriverManager().install()))
driver.get(url)
time.sleep(20)

products = driver.find_elements(By.CLASS_NAME,"thumbnail")
data = []

for product in products:
    titles = product.find_element(By.CLASS_NAME,"title").text
    price = product.find_element(By.CLASS_NAME,"price").text
    link = product.find_element(By.CLASS_NAME,"title").get_attribute("href")

    print(f"{titles}-{price}-{link} ")
    data.append({"Title": titles, "price": price, "link": link})

pd.DataFrame(data).to_csv("laptops.csv", index=False)

print(f"\n scraping complete! data saved to laptop.csv")
print(f"found {len(products)} products:\n")

for p in data:
    print("-", p["Title"])

driver.quit()
